!function(a){"use strict";function d(d,e){this.regex=/^(.*)(\d)+$/i,this.elem=d,this.$elem=a(d),this.elemClass=b+"-wrap",void 0!==e&&void 0!==e.limit&&e.limit>0&&(e.maximum=e.limit),this.config=a.extend({},c,e),this.clones=this.$elem.closestChild(this.config.cloneThis),this.init()}var b="cloneya",c={cloneThis:".toclone",cloneButton:".clone",deleteButton:".delete",clonePosition:"after",minimum:1,maximum:999,valueClone:!1,dataClone:!1,deepClone:!1,serializeID:!0,ignore:"label.error",preserveChildCount:!1};d.prototype={init:function(){var c=this;c.$elem.addClass(c.elemClass),c.clones.addClass(b),c.clones.data("initialCount",c.clones.length),c.$elem.on("click."+b,c.config.cloneThis+">"+c.config.cloneButton,function(d){d.preventDefault(),d.stopPropagation();var e=a(this).closest(c.config.cloneThis);c.$elem.triggerAll("clone_clone clone."+b,[e])}),c.$elem.on("clone."+b,function(a,d){a.namespace===b&&c._cloneAndAppend(d)}),c.$elem.on("click."+b,c.config.cloneThis+">"+c.config.deleteButton,function(d){d.preventDefault(),d.stopPropagation();var e=a(this).closest(c.config.cloneThis);c.$elem.triggerAll("clone_delete delete."+b,[e])}),c.$elem.on("delete."+b,function(d,e){var f=e.closest("."+c.elemClass).closestChild(c.config.cloneThis).length;f>c.config.minimum?(c.$elem.triggerAll("clone_before_delete before_delete."+b,[e,f]),c.$elem.triggerHandler("remove."+b,[e]),c.$elem.triggerAll("clone_after_delete after_delete."+b)):(c.$elem.triggerHandler("minimum."+b,c.config.minimum,[e]),e.find("input, textarea, select").each(function(){c._clearForm(a(this))}))}),c.$elem.on("remove."+b,function(b,c){a(c).remove()})},_clean:function(){var a=this;a.$elem.removeClass(b+"-wrap"),a.clones.removeClass(b),a.$elem.off("click."+b,a.config.cloneThis+">"+a.config.cloneButton),a.$elem.off("click."+b,a.config.cloneThis+">"+a.config.deleteButton),a.$elem.off("clone_clone clone_delete clone_before_delete clone."+b+" delete."+b+" before_delete."+b)},destroy:function(){this._clean(),this.$elem.removeData(b)},getOption:function(){return this.config},setOption:function(b){a.extend(this.config,b||{}),this._clean(),this.init()},_cloneAndAppend:function(a){if(a.closest("."+this.elemClass).closestChild(this.config.cloneThis).length<this.config.maximum){this.$elem.triggerAll("clone_before_clone before_clone."+b,[a]);var d=this._cloneItem(a);this.$elem.triggerAll("clone_after_clone after_clone."+b,[a,d]),this.clones.add(d),this.$elem.triggerAll("clone_before_append before_append."+b,[a,d]),"after"!==this.config.clonePosition?a.before(d):a.after(d),this.config.ignore&&d.find(this.config.ignore).remove(),this._redoIDs(),this.$elem.triggerAll("clone_after_append after_append."+b,[a,d])}else this.$elem.triggerAll("clone_limit maximum."+b,this.config.maximum,[a])},_cloneItem:function(c){var d=this,e=c.clone(d.config.dataClone,d.config.deepClone);if(!1!==d.config.preserveChildCount){var f=c.find("."+b+"-wrap");e.find("."+b+"-wrap").each(function(c){var d=a(this).closestChild("."+b),e=a(f[c]).closestChild("."+b),g=e.data("initialCount");d.slice(g,d.length).remove(),d.data("initial-count",g)})}return e.find("input, textarea, select").each(function(){d._clearForm(a(this)),d.$elem.triggerAll("clone_form_input form_input."+b,[a(this),c,e])}),e},_clearForm:function(a){this.config.valueClone||a.hasClass("noEmpty")||(a.is(":checkbox")||a.is(":radio")?a.prop("checked",!1):a.val(""))},_redoIDs:function(){var b=this;if(!0===b.config.serializeID){var c=b.$elem.find(b.config.cloneThis).first().attr("id");b.$elem.find(b.config.cloneThis).each(function(d){var e;e=0!==d?d:"",a(this).attr("id")&&a(this).attr("id",c+e);var f,g;a(this).find("*").each(function(){if(f=a(this).attr("id")){var c=f.match(b.regex);c&&3===c.length?(g=f.replace(/\d+$/,"")+e,a(this).attr("id",g)):(g=f+e,a(this).attr("id",g))}if(a(this).closest(b.config.cloneThis).find("label[for='"+f+"']").attr("for",g),b.config.serializeIndex){var h=a(this).attr("name");if(h){var i=h.match(/\[([0-9}]+)\]/);if(i&&i.length>=1){var j=h,h=j.replace(i[0],"["+d+"]");a(this).attr("name",h)}}}})})}}},a.fn[b]=function(c){var e=arguments;if(void 0===c||"object"==typeof c)return this.each(function(){a.data(this,b)||a.data(this,b,new d(this,c))});if("string"==typeof c&&"_"!==c[0]&&"init"!==c){if(0===Array.prototype.slice.call(e,1).length&&-1!==a.inArray(c,a.fn[b].getters)){var f=a.data(this[0],b);return f[c].apply(f,Array.prototype.slice.call(e,1))}return this.each(function(){var f=a.data(this,b);f instanceof d&&"function"==typeof f[c]&&f[c].apply(f,Array.prototype.slice.call(e,1))})}},a.fn[b].getters=["getOption"],a.fn.closestChild=function(b){var c,d;return c=this.children(),0===c.length?a():(d=c.filter(b),d.length>0?d:c.closestChild(b))},a.fn.extend({triggerAll:function(a,b){var d,c=this,e=a.split(" ");for(d=0;d<e.length;d+=1)c.triggerHandler(e[d],b);return c}})}(jQuery);